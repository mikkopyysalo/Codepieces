#
# basic stuff
install.packages(c("twitteR", "ROAuth", "RCurl"))
library(twitteR)
library(ROAuth)
library(RCurl)

#setup_twitter_oauth("XXXXXX","NNNNNN","CCCCCC","HHHHHHH")

install.packages("tm")
install.packages("wordcloud")
library(tm)
library(wordcloud)

Sys.setenv("MC_CORES" = 1)

wttweets<-searchTwitter("#wisdomteeth",n=200)

wttweets_text <- sapply(wttweets, function(x) x$getText())

wttweets_text_corpus <- Corpus(VectorSource(wttweets_text))

wttweets_text_corpus <- tm_map(wttweets_text_corpus,content_transformer(function(x) iconv(x, to='UTF-8-MAC', sub='byte')))


# building the document term matrix

wtdtm<-TermDocumentMatrix(wttweets_text_corpus, control=list(minWordLength=1)) 


# some association analyses

findFreqTerms(wtdtm)

findAssocs(wtdtm, "pain", 0.30) 




# wordcloud

pilvi<-as.matrix(wtdtm)

cumulus<-sort(rowSums(pilvi), decreasing=TRUE)

nimet<-names(cumulus)

d<-data.frame(word=nimet, freq=cumulus)

wordcloud(d$word, d$freq, min.freq=3)

